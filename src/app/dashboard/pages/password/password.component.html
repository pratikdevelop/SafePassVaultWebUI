

<div class="file-explorer">
  <div
  class="flex w-full p-4 items-center justify-between relative space-x-4 bg-slate-900 text-white"
>
  <mat-form-field
    appearance="outline"
    class="h-[8vh] bg-white w-6/12"
  >
    <input matInput type="text" placeholder="Search the password" aria-label="Search the password"/>
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>
  <div class="flex sm:items-center space-x-3 w-6/12  sm:justify-end">
    <!-- Add Menu -->
    <div class="flex flex-col items-start p-2">
      <button mat-icon (click)="openPasswordFormDialog(null)" aria-label="Add new item">
        <mat-icon class="icon-gray">add_circle_outline</mat-icon>
      </button>
     
    </div>
    <!-- Filter Menu -->
    <div class="flex flex-col items-start p-2">
      <button mat-icon [matMenuTriggerFor]="filterMenu" aria-label="Filter options">
        <mat-icon>filter_list</mat-icon>
      </button>
      <mat-menu #filterMenu="matMenu">
        <button mat-menu-item (click)="setFilter('modified')">Latest Modified</button>
        <button mat-menu-item (click)="setFilter('favourites')">Favourites</button>
        <button mat-menu-item (click)="setFilter('shared')">Shared With Me</button>
        <button mat-menu-item (click)="setFilter('create')">Created By Me</button>
      </mat-menu>
    </div>

    <!-- Actions Menu -->
    <div class="flex flex-col items-start p-2">
      <button mat-icon [matMenuTriggerFor]="actionMenu" aria-label="Actions menu">
        <mat-icon>settings</mat-icon>
      </button>
      <mat-menu #actionMenu="matMenu">
        <button mat-menu-item (click)="performAction('delete')">Delete</button>
        <button mat-menu-item (click)="performAction('add_favorites')">Add to Favourites</button>
        <button mat-menu-item (click)="performAction('share')">Share</button>
        <button mat-menu-item (click)="performAction('export')">Export</button>
      </mat-menu>
    </div>
  </div>
</div>
  <ng-container *ngIf="passwords.length > 0; else noDataTemplate">
    <table mat-table class="mat-elevation-z8" [dataSource]="passwords" [trackBy]="trackById">
      <ng-container matColumnDef="select">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox (change)="$event ? toggleAllRows() : null" [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
          </mat-checkbox>
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
          </mat-checkbox>
        </td>
      </ng-container>
      
      <ng-container matColumnDef="favourite">
        <th mat-header-cell *matHeaderCellDef>
          <button mat-menu-item matTooltip="Add to favourites" color="accent">
            <mat-icon>stars</mat-icon>
          </button>
        </th>
        <td mat-cell *matCellDef="let element">
          <button mat-menu-item matTooltip="Add to favourites" color="accent" (click)="updateFavourites(element._id)">
            <mat-icon [ngClass]="{'text-yellow-500': element.isFavorite, 'text-gray-600': !element.isFavorite}">stars</mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="_id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td mat-cell *matCellDef="let element; let i = index;">{{ i + 1 }}</td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{ element.name }}</td>
      </ng-container>

      <ng-container matColumnDef="website">
        <th mat-header-cell *matHeaderCellDef>Website</th>
        <td mat-cell *matCellDef="let element">{{ element.website }}</td>
      </ng-container>

      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>Username</th>
        <td mat-cell *matCellDef="let element">{{ element.username }}</td>
      </ng-container>

      <ng-container matColumnDef="password">
        <th mat-header-cell *matHeaderCellDef>Password</th>
        <td mat-cell *matCellDef="let element">{{ element.password }}</td>
      </ng-container>

      <ng-container matColumnDef="update_at">
        <th mat-header-cell *matHeaderCellDef>Update Date</th>
        <td mat-cell *matCellDef="let element">{{ element.updatedAt | date: 'short' }}</td>
      </ng-container>

      <ng-container matColumnDef="tags">
        <th mat-header-cell *matHeaderCellDef>Tags</th>
        <td mat-cell *matCellDef="let element">
          <mat-chip-grid #chipGrid aria-label="Tag selection">
            <mat-chip-row *ngFor="let tag of element.tags;">
              {{ tag.name }}
            </mat-chip-row>
          </mat-chip-grid>
        </td>
      </ng-container>

      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element" class="space-x-4">
          <a mat-button [matMenuTriggerFor]="setting">
            <mat-icon>more_vert</mat-icon>
          </a>
          <mat-menu #setting="matMenu">
            <button mat-menu-item matTooltip="Launch" (click)="autofill(element)">
              <mat-icon color="accent">launch</mat-icon>
              <span>Launch</span>
            </button>
            <button mat-menu-item matTooltip="Edit password" (click)="openPasswordFormDialog(element)">
              <mat-icon class="text-blue-500">edit</mat-icon>
              <span>Edit password</span>
            </button>
            <button mat-menu-item matTooltip="Delete password" (click)="delete(element._id)">
              <mat-icon color="warn" class="text-red-600">delete</mat-icon>
              <span>Delete password</span>
            </button>
            <button mat-menu-item matTooltip="Share password" (click)="sharePassword(element._id)">
              <mat-icon class="text-tertiary">share</mat-icon>
              <span>Share password</span>
            </button>
            <button mat-menu-item matTooltip="View password" (click)="viewPassword(element._id)">
              <mat-icon class="text-tertiary">remove_red_eye</mat-icon>
              <span>View password</span>
            </button>
          </mat-menu>
          
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </ng-container>
  <ng-template #noDataTemplate>
        <div class="flex items-center justify-center flex-col text-center p-6 h-[90vh] overflow-hidden">
        <img src="https://placehold.co/150" alt="error-icon" class="w-24 h-24 text-primary mb-4 animate-bounce" />
        <p class="text-primary font-extrabold text-2xl mt-2">Oops! Data not found</p>
        <p class="text-muted-foreground text-sm mt-1">It seems like we couldn't locate the information you requested.</p>
        <div class="flex space-x-6 mt-6">
            <button class="bg-secondary text-secondary-foreground px-5 py-3 rounded-full shadow-md hover:bg-secondary/80 transition duration-300">Retry</button>
            <button class="bg-accent text-accent-foreground px-5 py-3 rounded-full shadow-md hover:bg-accent/80 transition duration-300">Add</button>
        </div>
    </div>
    
    
  </ng-template>